<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ProMan — Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .sidebar-gradient {
            background: linear-gradient(180deg, #8B5E3C 0%, #7a4f30 100%);
        }
        .nav-item.active {
            background: rgba(255, 255, 255, 0.1);
            border-left: 4px solid #FFF4E6;
        }
        .payment-hover {
            transition: background-color .15s, color .15s;
        }
        .payment-hover:hover {
            background-color: #FFF8E7;
            color: #8B5E3C;
            cursor: pointer;
        }
        .indicator {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 1.9rem;
            height: 1.9rem;
            border-radius: 0.5rem;
            font-weight: 700;
            user-select: none;
        }
        .row-selected {
            background-color: #f7f7f7;
            box-shadow: inset 0 0 0 2px rgba(210, 180, 140, 0.12);
        }
        .progress-dot {
            width: 14px;
            height: 14px;
            border-radius: 9999px;
            display: inline-block;
            background: #D9CBB8;
            border: 2px solid transparent;
        }
        .hero-gradient {
            background: linear-gradient(180deg, #8B5E3C 0%, #7a4f30 100%);
        }
        .feature-icon {
            width: 44px;
            height: 44px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }
        @media (max-width: 768px) {
            .sidebar-mobile-hidden {
                transform: translateX(-100%);
            }
            .sidebar-mobile-visible {
                transform: translateX(0);
            }
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800 antialiased min-h-screen flex">
<!-- Sidebar -->
<div class="sidebar-gradient text-white w-64 min-h-screen fixed left-0 top-0 z-40 transition-transform duration-300 sidebar-mobile-hidden lg:sidebar-mobile-visible">
    <!-- White Header -->
    <div class="bg-white p-6 border-b border-gray-200">
        <div class="flex items-center gap-3">
            <img src="/umuzi/img/mypromann.png" alt="ProMan logo" class="h-10 w-auto object-contain">
            <div>
                <div class="text-xl font-extrabold text-[#8B5E3C]">ProMan</div>
                <div class="text-xs text-gray-500">Property Management</div>
            </div>
        </div>
    </div>

    <!-- Dashboard Cards in Navbar -->
    <div class="p-4 space-y-3">
        <div class="bg-white/10 rounded-lg p-3 border-l-4 border-[#FFF4E6]">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-white/80 text-xs">Total Properties</p>
                    <p class="text-lg font-bold text-white">8</p>
                </div>
                <div class="feature-icon bg-white/20 text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                    </svg>
                </div>
            </div>
            <p class="text-white/60 text-xs mt-1">+2 from last month</p>
        </div>

        <div class="bg-white/10 rounded-lg p-3 border-l-4 border-green-400">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-white/80 text-xs">Occupied Units</p>
                    <p class="text-lg font-bold text-white">18</p>
                </div>
                <div class="feature-icon bg-white/20 text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
            </div>
            <p class="text-white/60 text-xs mt-1">92% occupancy rate</p>
        </div>

        <div class="bg-white/10 rounded-lg p-3 border-l-4 border-blue-400">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-white/80 text-xs">Vacant Units</p>
                    <p class="text-lg font-bold text-white">2</p>
                </div>
                <div class="feature-icon bg-white/20 text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 12H4"/>
                    </svg>
                </div>
            </div>
            <p class="text-white/60 text-xs mt-1">Available for rent</p>
        </div>

        <div class="bg-white/10 rounded-lg p-3 border-l-4 border-purple-400">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-white/80 text-xs">Monthly Revenue</p>
                    <p class="text-lg font-bold text-white">R42,500</p>
                </div>
                <div class="feature-icon bg-white/20 text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
            </div>
            <p class="text-white/60 text-xs mt-1">+R2,500 from last month</p>
        </div>
    </div>

    <!-- Navigation Menu -->
    <nav class="p-4 space-y-2 mt-4">
        <a href="http://localhost:7070/" class="nav-item flex items-center gap-3 p-3 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
            </svg>
            Home
        </a>
        <a href="http://localhost:7070/dashboard" class="nav-item active flex items-center gap-3 p-3 rounded-lg text-white bg-white/10 border-l-4 border-[#FFF4E6]">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
            </svg>
            Dashboard
        </a>
        <a href="http://localhost:7070/add_property_unit" class="nav-item flex items-center gap-3 p-3 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
            </svg>
            Add Property
        </a>
        <a href="http://localhost:7070/" class="nav-item flex items-center gap-3 p-3 rounded-lg text-white/80 hover:bg-white/10 hover:text-white transition">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
            </svg>
            Logout
        </a>
    </nav>
</div>

<!-- Mobile menu button -->
<div class="lg:hidden fixed top-4 left-4 z-50">
    <button id="mobileMenuButton" class="p-2 rounded-lg bg-[#8B5E3C] text-white">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
    </button>
</div>

<!-- Main content -->
<div class="flex-1 lg:ml-64 min-h-screen">
    <div class="p-6">
        <!-- Simple Header -->
        <header class="mb-8">
            <h1 class="text-3xl font-bold text-[#8B5E3C] mb-2">Property Management</h1>
            <p class="text-gray-600">Manage your properties and tenant payments</p>
        </header>
        <!-- Property Management Section - Side by Side Layout -->
        <div class="flex flex-col lg:flex-row gap-6">
            <!-- Property Controls - Left Side -->
            <div class="lg:w-1/3">
                <div class="bg-white rounded-lg shadow p-6 h-full">
                    <form id="propertyForm" action="http://localhost:7070/fetch_property_units" method="post">
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">Property Name</label>
                                <select id="propertySelect" name="name" class="w-full rounded-md border-gray-300 shadow-sm focus:ring-0 focus:border-[#8B5E3C]">
                                    <option value="">Select property</option>
                                    <option value="all">All properties</option>
                                    <option th:each="name : ${names}" th:value="${name}" th:text="${name}">Default Name</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-2">Search tenant</label>
                                <input id="tenantSearch" type="search" placeholder="Search by tenant name (e.g. John Doe)"
                                       class="w-full rounded-md border-gray-300 shadow-sm focus:ring-0 focus:border-[#8B5E3C]" />
                            </div>
                        </div>
                    </form>
                    <div class="mt-6">
                        <label class="block text-sm font-medium text-gray-600 mb-2">Property Image</label>
                        <div class="border border-gray-300 rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center h-48">
                            <img src="/umuzi/img/mypromann.png" alt="Property image" class="max-h-full max-w-full object-contain">
                        </div>
                    </div>
                    <div class="mt-6">
                        <a href="http://localhost:7070/add_property_unit" class="inline-flex items-center gap-2 px-4 py-2 bg-[#8B5E3C] text-white rounded-lg hover:bg-[#70472E] transition font-medium">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                            </svg>
                            Add New Property
                        </a>
                    </div>
                    <p class="mt-4 text-sm text-gray-500">
                        Tip: Select a row, then use the external controls (+ / -) to update only the Payment box. Overdue shows number of days overdue.
                    </p>
                </div>
            </div>
            <!-- Units Table - Right Side -->
            <div class="lg:w-2/3">
                <div class="bg-white rounded-lg shadow p-6 h-full">
                    <div id="controlsWrapper" class="mb-4 flex flex-wrap gap-3 items-center">
                        <button id="btnPaid" type="button" class="px-4 py-2 rounded-md bg-green-600 text-white font-semibold shadow hover:bg-green-700 transition">
                            Mark Paid (+)
                        </button>
                        <button id="btnUnpaid" type="button" class="px-4 py-2 rounded-md bg-red-600 text-white font-semibold shadow hover:bg-red-700 transition">
                            Mark Unpaid (-)
                        </button>
                        <div class="text-sm text-gray-600">Select a row, then click a button to update the Payment box only.</div>
                    </div>
                    <p th:if="${unit != null and unit != ''}"
                       th:text="|You have already marked Unit ${unit} as paid this month.|" class="text-green-600 font-medium"></p>
                    <p th:if="${success != null and success != ''}"
                       th:text="|Unit ${success} marked as paid this month.|" class="text-green-600 font-medium"></p>
                    <!-- BEGIN TABLE MODIFICATION -->
                    <div class="overflow-x-auto flex-1">
                        <table class="min-w-full border-separate border-spacing-0 border-[#D2B48C] rounded-lg shadow-md bg-white">
                            <thead class="bg-[#FAF3E0] border-b border-[#D2B48C]">
                            <tr>
                                <th class="px-4 py-3 text-left font-semibold border-b border-[#D2B48C] bg-[#F7E9D4] sticky top-0 z-10">Unit Number</th>
                                <th class="px-4 py-3 text-left font-semibold border-b border-[#D2B48C] bg-[#F7E9D4] sticky top-0 z-10">Rent</th>
                                <th class="px-4 py-3 text-left font-semibold border-b border-[#D2B48C] bg-[#F7E9D4] sticky top-0 z-10">Occupation</th>
                                <th class="px-4 py-3 text-left font-semibold border-b border-[#D2B48C] bg-[#F7E9D4] sticky top-0 z-10">Tenant</th>
                                <th class="px-4 py-3 text-left font-semibold border-b border-[#D2B48C] bg-[#F7E9D4] sticky top-0 z-10">Rent Day</th>
                                <th class="px-4 py-3 text-left font-semibold border-b border-[#D2B48C] bg-[#F7E9D4] sticky top-0 z-10">Overdue</th>
                                <th class="px-4 py-3 text-left font-semibold border-b border-[#D2B48C] bg-[#F7E9D4] sticky top-0 z-10">Status</th>
                            </tr>
                            </thead>
                            <tbody id="unitsTbody">
                            <tr th:each="entry : ${units}"
                                class="border-b border-gray-200 hover:bg-[#FAF3E0] transition even:bg-[#FCF6ED] odd:bg-white">
                                <td class="px-4 py-3 unit-number" th:text="${entry.value[0]}">Unit</td>
                                <td class="px-4 py-3 rent-amount" th:text="${entry.value[1]}">0</td>
                                <td class="px-4 py-3" th:text="${entry.value[2]}">yes</td>
                                <td class="px-4 py-3 unit-id" th:text="${entry.value[3]}">0</td>
                                <td class="px-4 py-3 unit-tenant" th:text="${entry.value[4]}">70</td>
                                <td class="px-4 py-3 unit-tenant" th:text="${entry.value[5]}">0</td>
                                <td class="px-4 py-3 payment-hover payment-cell">
                                    <!-- default status: '-' in red ALWAYS -->
                                    <span th:if="${entry.value[2]} == 'yes'"
                                          class="indicator bg-red-100 text-red-800 open-pay cursor-pointer"
                                          th:data-unit="${entry.value[0]}"
                                          th:data-rent="${entry.value[1]}"
                                          th:data-id="${entry.value[3]}"
                                          th:data-property-name="${propertyName}">−</span>
                                    <span th:if="${entry.value[2]} == 'no'" class="indicator bg-red-100 text-red-800">−</span>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- END TABLE MODIFICATION -->
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Payment Modal -->
<div id="paymentModal" class="fixed inset-0 bg-black bg-opacity-40 hidden items-center justify-center z-50">
    <div class="bg-white p-6 rounded-lg shadow-lg w-96 text-center">
        <h2 class="text-lg font-semibold mb-3">Update Payment Status</h2>
        <p class="text-gray-700 mb-2">Unit: <span id="modalUnitDisplay" class="font-bold"></span></p>
        <p class="text-gray-700 mb-4 text-sm">Original Rent: <span id="modalOriginalRent" class="font-bold"></span></p>
        <form id="paymentForm" method="post">
            <input type="hidden" name="unit" id="modalUnit">
            <input type="hidden" name="id" id="modalId">
            <input type="hidden" name="property_name" id="modalPropertyName">
            <input type="hidden" name="paid" value="yes">
            <div class="mb-4">
                <label for="modalRentInput" class="block text-sm font-medium text-gray-700 mb-2 text-left">
                    Rent Paid Amount:
                </label>
                <input type="number"
                       id="modalRentInput"
                       name="rent"
                       step="0.01"
                       min="0"
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#8B5E3C] focus:border-transparent"
                       placeholder="Enter rent amount">
            </div>
            <div class="flex gap-3">
                <button type="submit" class="flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition">
                    Confirm Payment
                </button>
                <button type="button" onclick="closePaymentModal()" class="flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 font-medium transition">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>
<!-- JavaScript -->
<script>
    // Mobile menu toggle
    const mobileMenuButton = document.getElementById('mobileMenuButton');
    const sidebar = document.querySelector('.sidebar-gradient');

    mobileMenuButton.addEventListener('click', () => {
        sidebar.classList.toggle('sidebar-mobile-hidden');
        sidebar.classList.toggle('sidebar-mobile-visible');
    });

    // Your existing JavaScript functionality (filters, payment modal, etc.)
    const propertySelect = document.getElementById('propertySelect');
    const tenantSearch = document.getElementById('tenantSearch');
    const tbody = document.getElementById('unitsTbody');
    const rows = Array.from(tbody.querySelectorAll('tr'));

    function applyFilters() {
        const prop = propertySelect.value;
        const tenantQuery = tenantSearch.value.trim().toLowerCase();
        rows.forEach(row => {
            const rowProp = row.dataset.property || '';
            const rowTenant = row.dataset.tenant || '';
            const matchesProp = (prop === 'all') || (rowProp === prop);
            const matchesTenant = tenantQuery === '' || rowTenant.toLowerCase().includes(tenantQuery);
            row.style.display = (matchesProp && matchesTenant) ? '' : 'none';
        });
    }

    propertySelect.addEventListener('change', applyFilters);
    tenantSearch.addEventListener('input', applyFilters);

    let selectedRow = null;
    function clearSelection() {
        if (!selectedRow) return;
        selectedRow.classList.remove('row-selected');
        selectedRow = null;
    }

    rows.forEach(row => {
        row.addEventListener('click', (e) => {
            if (e.target.closest('.indicator')) return;
            if (selectedRow) selectedRow.classList.remove('row-selected');
            selectedRow = row;
            selectedRow.classList.add('row-selected');
        });
    });

    const btnPaid = document.getElementById('btnPaid');
    const btnUnpaid = document.getElementById('btnUnpaid');

    function updatePaymentForRow(row, paid) {
        const paymentIndicator = row.querySelector('.payment-cell .indicator');
        if (!paymentIndicator) return;
        if (paid) {
            paymentIndicator.textContent = '+';
            paymentIndicator.classList.remove('bg-red-100', 'text-red-800');
            paymentIndicator.classList.add('bg-green-100', 'text-green-800');
            paymentIndicator.setAttribute('aria-label', 'Payment: yes');
        } else {
            paymentIndicator.textContent = '-';
            paymentIndicator.classList.remove('bg-green-100', 'text-green-800');
            paymentIndicator.classList.add('bg-red-100', 'text-red-800');
            paymentIndicator.setAttribute('aria-label', 'Payment: no');
        }
    }

    function togglePaymentStatus(paymentCell) {
        const paymentIndicator = paymentCell.querySelector('.indicator');
        if (!paymentIndicator) return;
        const isPaid = paymentIndicator.textContent === '+';
        updatePaymentForRow(paymentCell.closest('tr'), !isPaid);
        flashMessage(`Payment status ${!isPaid ? 'set to paid (+)' : 'set to unpaid (-)'}`, !isPaid ? 'green' : 'red');
    }

    document.querySelectorAll('.payment-cell').forEach(cell => {
        cell.addEventListener('click', function(e) {
            if (e.target.closest('.indicator')) {
                togglePaymentStatus(this);
            }
        });
    });

    function flashMessage(msg, color = 'yellow') {
        const el = document.createElement('div');
        el.className = `fixed top-4 right-4 z-50 px-4 py-2 rounded-md text-sm font-medium ${
            color === 'green' ? 'bg-green-100 text-green-800' :
            color === 'red' ? 'bg-red-100 text-red-800' :
            'bg-yellow-100 text-yellow-800'
        }`;
        el.textContent = msg;
        document.body.appendChild(el);
        setTimeout(() => el.remove(), 1600);
    }

    btnPaid.addEventListener('click', () => {
        if (!selectedRow) return flashMessage('No row selected — click a row first.', 'yellow');
        updatePaymentForRow(selectedRow, true);
        flashMessage('Payment set to + (paid).', 'green');
    });

    btnUnpaid.addEventListener('click', () => {
        if (!selectedRow) return flashMessage('No row selected — click a row first.', 'yellow');
        updatePaymentForRow(selectedRow, false);
        flashMessage('Payment set to - (unpaid).', 'red');
    });

    propertySelect.addEventListener('change', function () {
        const selectedValue = this.value;
        if (selectedValue && selectedValue !== 'all') {
            document.getElementById('propertyForm').submit();
        }
    });

    // Payment Modal Functions
    const paymentModal = document.getElementById('paymentModal');
    const modalUnitDisplay = document.getElementById('modalUnitDisplay');
    const modalOriginalRent = document.getElementById('modalOriginalRent');
    const modalUnit = document.getElementById('modalUnit');
    const modalId = document.getElementById('modalId');
    const modalPropertyName = document.getElementById('modalPropertyName');
    const modalRentInput = document.getElementById('modalRentInput');
    const paymentForm = document.getElementById('paymentForm');

    function openPaymentModal(unit, rent, id, propertyName) {
        modalUnitDisplay.textContent = unit;
        modalOriginalRent.textContent = rent;
        modalUnit.value = unit;
        modalId.value = id;
        modalPropertyName.value = propertyName;
        modalRentInput.value = rent;

        paymentForm.action = `http://localhost:7070/payment_status/${id}/success`;

        modalRentInput.focus();
        paymentModal.classList.remove('hidden');
        paymentModal.classList.add('flex');
    }

    function closePaymentModal() {
        paymentModal.classList.add('hidden');
        paymentModal.classList.remove('flex');
    }

    document.addEventListener('DOMContentLoaded', function() {
        const openPayButtons = document.querySelectorAll('.open-pay');

        openPayButtons.forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
                const unit = this.dataset.unit;
                const rent = this.dataset.rent;
                const id = this.dataset.id;
                const propertyName = this.dataset.propertyName;

                if (!unit || !rent || !id || !propertyName) {
                    const row = this.closest('tr');
                    const unitCell = row.querySelector('.unit-number');
                    const rentCell = row.querySelector('.rent-amount');
                    const idCell = row.querySelector('.unit-id');
                    const propertySelect = document.getElementById('propertySelect');

                    openPaymentModal(
                        unit || unitCell.textContent,
                        rent || rentCell.textContent,
                        id || idCell.textContent,
                        propertyName || propertySelect.value || 'default'
                    );
                } else {
                    openPaymentModal(unit, rent, id, propertyName);
                }
            });
        });
    });

    paymentModal.addEventListener('click', function(e) {
        if (e.target === paymentModal) {
            closePaymentModal();
        }
    });

    document.getElementById('paymentForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const unit = modalUnit.value;
        const rent = modalRentInput.value;
        const id = modalId.value;
        const propertyName = modalPropertyName.value;

        if (!rent || rent <= 0) {
            flashMessage('Please enter a valid rent amount', 'red');
            modalRentInput.focus();
            return;
        }

        flashMessage(`Updating payment for Unit ${unit}...`, 'yellow');
        this.submit();
    });

    applyFilters();
</script>
</body>
</html>